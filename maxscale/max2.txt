


[maxscale]
threads=auto
admin_secure_gui=false
admin_host=0.0.0.0
config_sync_cluster="monitor1"
config_sync_user=root
config_sync_password=password
passive=true


[node1]
type=server
address=mariadb1
port=3306
protocol=MariaDBBackend

[node2]
type=server
address=mariadb2
port=3306
protocol=MariaDBBackend

[node3]
type=server
address=mariadb3
port=3306
protocol=MariaDBBackend


[service1]
type=service
router=readwritesplit
servers=node1,node2,node3
user=root
password=password
transaction_replay                   = true
transaction_replay_max_size          = 10Mi
transaction_replay_attempts          = 1000
transaction_replay_retry_on_deadlock = true



[monitor1]
type=monitor
module=mariadbmon
servers=node1,node2,node3
user=root
password=password
auto_failover=true
auto_rejoin=true
cooperative_monitoring_locks=majority_of_running


[listener1]
type=listener
service=service1
protocol=MariaDBClient
port=4006